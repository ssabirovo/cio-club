{"ast":null,"code":"var _jsxFileName = \"/Users/asilbekbekmurodov/Desktop/ibrat-club/src/components/order/order.tsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { Controller, useForm } from \"react-hook-form\";\nimport cls from \"./order.module.scss\";\nimport { t } from \"i18next\";\nimport axios from \"axios\";\nimport { toast } from \"react-toastify\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport * as yup from \"yup\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst scheme = yup.object().shape({\n  email: yup.string().required(\"Maydonni to'ldiring !\").email(\"Noto'g'ri email kiritildi !\"),\n  phone: yup.string().matches(/^[0-9]{9}$/, \"Must be exactly 5 digits\")\n});\n\nconst Order = _ref => {\n  _s();\n\n  let {\n    setModalActive,\n    type,\n    forceRender\n  } = _ref;\n  const defaultEmail = localStorage.getItem(\"email\");\n  const defaultPhone = localStorage.getItem(\"phoneNumber\");\n  const {\n    formState: {\n      errors\n    },\n    handleSubmit,\n    control,\n    reset\n  } = useForm({\n    resolver: yupResolver(scheme),\n    defaultValues: {\n      email: defaultEmail ? defaultEmail : \"\",\n      phone: defaultPhone ? defaultPhone : \"\"\n    }\n  });\n\n  const onSubmit = data => {\n    axios.post(\"https://api.teda.uz:70/api/site\", {\n      email: data.email,\n      phone: \"+998\".concat(data.phone),\n      aboutProduct: type,\n      category: type\n    }).then(res => {\n      console.log(res); //@ts-ignore\n\n      let lastOrders = JSON.parse(localStorage.getItem(\"lastOrders\"));\n      lastOrders[`${type}`].id = res.data.data.id;\n      lastOrders[`${type}`].date = res.data.data.dateTime;\n      localStorage.setItem(\"lastOrders\", JSON.stringify(lastOrders));\n      toast.success(\"Bog'langaniz uchun rahmat !\", {\n        position: toast.POSITION.TOP_RIGHT\n      });\n      forceRender(1);\n    }).catch(err => {\n      console.log(err);\n    });\n    localStorage.setItem(\"email\", data.email);\n    localStorage.setItem(\"phoneNumber\", data.phone);\n    setModalActive(false);\n    reset();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    id: \"form\",\n    className: cls.form,\n    onSubmit: handleSubmit(onSubmit),\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"\\\"\", t(type), \"\\\"ga buyurtma berish uchun toldring: \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Controller, {\n      name: \"email\",\n      control: control,\n      rules: {\n        required: \"Required\"\n      },\n      render: _ref2 => {\n        var _errors$email, _errors$email2, _errors$email3;\n\n        let {\n          field\n        } = _ref2;\n        return /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            style: {\n              border: `${(_errors$email = errors.email) !== null && _errors$email !== void 0 && _errors$email.message ? \"1px solid red\" : \"1px solid var( --link-text)\"} `\n            },\n            className: cls.input,\n            ...field,\n            placeholder: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this), ((_errors$email2 = errors.email) === null || _errors$email2 === void 0 ? void 0 : _errors$email2.message) && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: cls.error,\n            children: [`${(_errors$email3 = errors.email) === null || _errors$email3 === void 0 ? void 0 : _errors$email3.message}`, \" \", /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa-solid fa-triangle-exclamation\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Controller, {\n      name: \"phone\",\n      control: control,\n      rules: {\n        required: \"Required\"\n      },\n      render: _ref3 => {\n        var _errors$phone, _errors$phone2;\n\n        let {\n          field\n        } = _ref3;\n        return /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: cls.box,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"+998\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              style: {\n                border: `${(_errors$phone = errors.phone) !== null && _errors$phone !== void 0 && _errors$phone.message ? \"1px solid red\" : \"1px solid  var(--link-text)\"} `\n              },\n              ...field,\n              className: cls.phone,\n              placeholder: \"__ ___ __ __\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, this), ((_errors$phone2 = errors.phone) === null || _errors$phone2 === void 0 ? void 0 : _errors$phone2.message) && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: cls.error,\n            children: [\"Raqam noto'g'ri kiritildi !\", /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa-solid fa-triangle-exclamation\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      className: cls[\"submit-btn\"],\n      type: \"submit\",\n      value: `${t(\"contact.submitBtn\")}`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Order, \"miatGz5RDK5bIxOnXa4TD7FZLX4=\", false, function () {\n  return [useForm];\n});\n\n_c = Order;\nexport default Order;\n\nvar _c;\n\n$RefreshReg$(_c, \"Order\");","map":{"version":3,"names":["React","Controller","useForm","cls","t","axios","toast","yupResolver","yup","scheme","object","shape","email","string","required","phone","matches","Order","setModalActive","type","forceRender","defaultEmail","localStorage","getItem","defaultPhone","formState","errors","handleSubmit","control","reset","resolver","defaultValues","onSubmit","data","post","concat","aboutProduct","category","then","res","console","log","lastOrders","JSON","parse","id","date","dateTime","setItem","stringify","success","position","POSITION","TOP_RIGHT","catch","err","form","field","border","message","input","error","box"],"sources":["/Users/asilbekbekmurodov/Desktop/ibrat-club/src/components/order/order.tsx"],"sourcesContent":["import React from \"react\";\nimport { Controller, useForm } from \"react-hook-form\";\nimport cls from \"./order.module.scss\";\nimport { t } from \"i18next\";\nimport axios from \"axios\";\nimport { toast } from \"react-toastify\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport * as yup from \"yup\";\nimport { object } from \"prop-types\";\n\ninterface OrderProps {\n  setModalActive: any;\n  type: any;\n  title: string;\n  forceRender: any;\n}\n\nconst scheme = yup.object().shape({\n  email: yup\n    .string()\n    .required(\"Maydonni to'ldiring !\")\n    .email(\"Noto'g'ri email kiritildi !\"),\n  phone: yup.string().matches(/^[0-9]{9}$/, \"Must be exactly 5 digits\"),\n});\n\ntype FormValues = {\n  email: string;\n  phone: string;\n};\n\nconst Order: React.FC<OrderProps> = ({ setModalActive, type, forceRender }) => {\n  const defaultEmail = localStorage.getItem(\"email\");\n  const defaultPhone = localStorage.getItem(\"phoneNumber\");\n  const {\n    formState: { errors },\n    handleSubmit,\n    control,\n    reset,\n  } = useForm<FormValues>({\n    resolver: yupResolver(scheme),\n    defaultValues: {\n      email: defaultEmail ? defaultEmail : \"\",\n      phone: defaultPhone ? defaultPhone : \"\",\n    },\n  });\n\n  const onSubmit = (data: any) => {\n    axios\n      .post(\"https://api.teda.uz:70/api/site\", {\n        email: data.email,\n        phone: \"+998\".concat(data.phone),\n        aboutProduct: type,\n        category: type,\n      })\n      .then((res) => {\n        console.log(res);\n        //@ts-ignore\n        let lastOrders = JSON.parse(localStorage.getItem(\"lastOrders\"));\n        lastOrders[`${type}`].id = res.data.data.id;\n        lastOrders[`${type}`].date = res.data.data.dateTime;\n        localStorage.setItem(\"lastOrders\", JSON.stringify(lastOrders));\n\n        toast.success(\"Bog'langaniz uchun rahmat !\", {\n          position: toast.POSITION.TOP_RIGHT,\n        });\n        forceRender(1);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n    localStorage.setItem(\"email\", data.email);\n    localStorage.setItem(\"phoneNumber\", data.phone);\n    setModalActive(false);\n    reset();\n  };\n\n  return (\n    <form id=\"form\" className={cls.form} onSubmit={handleSubmit(onSubmit)}>\n      <p>\"{t(type)}\"ga buyurtma berish uchun toldring: </p>\n      <Controller\n        name=\"email\"\n        control={control}\n        rules={{ required: \"Required\" }}\n        render={({ field }) => (\n          <>\n            <input\n              style={{\n                border: `${\n                  errors.email?.message\n                    ? \"1px solid red\"\n                    : \"1px solid var( --link-text)\"\n                } `,\n              }}\n              className={cls.input}\n              {...field}\n              placeholder=\"Email\"\n            />\n            {errors.email?.message && (\n              <p className={cls.error}>\n                {`${errors.email?.message}`}{\" \"}\n                <i className=\"fa-solid fa-triangle-exclamation\"></i>\n              </p>\n            )}\n          </>\n        )}\n      />\n\n      <Controller\n        name=\"phone\"\n        control={control}\n        rules={{ required: \"Required\" }}\n        render={({ field }) => (\n          <>\n            <div className={cls.box}>\n              <div>+998</div>\n              <input\n                style={{\n                  border: `${\n                    errors.phone?.message\n                      ? \"1px solid red\"\n                      : \"1px solid  var(--link-text)\"\n                  } `,\n                }}\n                {...field}\n                className={cls.phone}\n                placeholder={\"__ ___ __ __\"}\n              />\n            </div>\n            {errors.phone?.message && (\n              <p className={cls.error}>\n                Raqam noto'g'ri kiritildi !\n                <i className=\"fa-solid fa-triangle-exclamation\"></i>\n              </p>\n            )}\n          </>\n        )}\n      />\n\n      <input\n        className={cls[\"submit-btn\"]}\n        type=\"submit\"\n        value={`${t(\"contact.submitBtn\")}`}\n      />\n    </form>\n  );\n};\n\nexport default Order;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}